services:
  agent:
    build: .
    ports:
      - "3001:3001"   # admin dashboard (only external port)
    env_file:
      - .env
    environment:
      - PORT=3010
      - ADMIN_PORT=3001
      - SPAWN_WORKER=true
    volumes:
      - agent-workspace:/workspace
      - /var/run/docker.sock:/var/run/docker.sock  # for self-update skill

volumes:
  agent-workspace:
